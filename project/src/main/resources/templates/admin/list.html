<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.6/dist/minty/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/custom.css}">
</head>
<body>
    	<!-- Incluye el navbar-fragment -->
	<header>
        <div th:replace="~{fragments/navbarAdmin :: navbar}"></div>
        </header>
<div class="container py-4 mt-5">
    <h2>Gestión de Usuarios</h2>
<div th:replace="~{fragments/messages :: messages}"></div>

    <!-- Tabla de usuarios -->
   <table class="table table-striped">
		<thead>
			<tr>
				<th>ID</th>
				<th>Nombre</th>
				<th>Primer Apellido</th>
				<th>Segundo Apellido</th>
				<th>Email</th>
				<th>Teléfono</th>
				<th>Fecha registro</th>
				<th>Foto perfil</th>
				<th>Rol</th>
				<th>Habilitado</th>
				
			</tr>
		</thead>
		<tbody>
			<tr th:each="user : ${users}">
				<td th:text="${user.id}"></td>
				<td th:text="${user.name}"></td>
				<td th:text="${user.firstLastName}"></td>
				<td th:text="${user.secondLastName}"></td>
				<td th:text="${user.email}"></td>
				<td th:text="${user.phoneNumber}"></td>
				<td th:text="${dateFormatter.format(user.registrationDate)}"></td>
                <!-- Muestra la imagen de perfil si existe -->
				<td><img th:if="${user.profilePicture}"
					th:src="${user.profilePicture}" width="50" height="50"
					class="img-thumbnail" alt=""> <span
					th:unless="${user.profilePicture}">Sin imagen</span></td>

				<td th:text="${user.rol.name}"></td>
				<td th:text="${user.enabled ? 'Sí' : 'No'}"></td>
		    </tr>
		</tbody>
	</table>
	<a th:href="@{/admin/dashboard}" class="btn btn-secondary">Volver</a>
</div>
<!-- Incluye el footer-fragment -->
<div th:replace="~{fragments/footer :: footer}"></div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
		crossorigin="anonymous"></script>

</body>
</html>