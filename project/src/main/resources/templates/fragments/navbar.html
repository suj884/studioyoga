<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8">
	<title>Barra de navegacion</title>
	<link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.6/dist/minty/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/custom.css}">


</head>

<body>
	<div th:fragment="navbar">
		<nav class="navbar navbar-expand-lg fixed-top bg-body-tertiary shadow-sm">
			<div class="container-fluid d-flex justify-content-center">
				<a th:href="@{/}" class="navbar-brand fs-4 fw-bold text-primary" style="text-decoration:none;">
					<span class="material-icons align-middle" style="font-size:1.5em;vertical-align:middle;">spa</span>
					Studio Yoga
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
					aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="w-100 text-center text-primary">

						<ul class="navbar-nav mx-auto mb-2 mb-lg-0 justify-content-center">
							<!-- Centra los enlaces -->
							<li class="nav-item"><a class="nav-link" th:href="@{/}">Inicio</a></li>
							<li class="nav-item"><a class="nav-link" th:href="@{/classes}">Clases</a></li>
							<li class="nav-item" sec:authorize="isAuthenticated()">
								<a class="nav-link" th:href="@{/classes/myReservations}">Mis reservas</a>
							</li>

							<li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#"
									id="dropdownClases" type="button" data-bs-toggle="dropdown"
									aria-expanded="false">Sobre las clases</a>
								<ul class="dropdown-menu" aria-labelledby="dropdownClases">
									<li><a class="dropdown-item" th:href="@{/schedule}">Horarios</a></li>
									<li><a class="dropdown-item" th:href="@{/prices}">Precios
											y planes</a></li>
									<li><a class="dropdown-item" th:href="@{/rules}">Normas
											y Recomendaciones</a></li>
								</ul>
							</li>

							<li class="nav-item"><a class="nav-link" th:href="@{/events}">Eventos</a></li>
							<li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="dropdownMas"
									type="button" data-bs-toggle="dropdown" aria-expanded="false">Más</a>
								<ul class="dropdown-menu" aria-labelledby="dropdownMas">
									<li><a class="dropdown-item" th:href="@{/blog}">Blog</a></li>
									<li><a class="dropdown-item" th:href="@{/guide}">Guía
											del Yoga</a></li>
									<li><a class="dropdown-item" th:href="@{/faq}">Preguntas
											frecuentes</a></li>
								</ul>
							</li>
							<li class="nav-item"><a class="nav-link" th:href="@{/location}">Ubicación</a></li>
						</ul>
					</div>
					<!-- <div class="ms-auto">
						<a th:href="@{/login}" class="btn btn-outline-primary rounded-5 mx-2 p-2">Login</a>
					</div> -->
					<!-- Usuario autenticado -->
					<div class="ms-auto d-flex align-items-center" sec:authorize="isAuthenticated()">
						<img th:src="${#authentication.principal.profilePicture != null ? #authentication.principal.profilePicture : '/images/default-avatar.png'}"
							alt="Foto de perfil" class="rounded-circle me-2" width="40" height="40"
							style="object-fit: cover;">
						<span class="me-2 fw-semibold"
							th:text="${#strings.substringBefore(#authentication.principal.username, '@')}">
							Usuario
						</span>

						<form th:action="@{/logout}" method="post" class="d-inline">
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
							<button class="btn btn-secondary rounded-5 mx-2 p-2" type="submit">Cerrar sesión</button>
						</form>
					</div>
					<div class="ms-auto" sec:authorize="!isAuthenticated()">
						<a th:href="@{/login}" class="btn btn-secondary rounded-5 mx-2 p-2">Login</a>
					</div>


					<!-- Usuario no autenticado
					<div class="ms-auto" sec:authorize="!isAuthenticated()">
						<a th:href="@{/login}" class="btn btn-secondary rounded-5 mx-2 p-2">Login</a>
					</div> -->

				</div>
			</div>
		</nav>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
		crossorigin="anonymous"></script>
</body>

</html>