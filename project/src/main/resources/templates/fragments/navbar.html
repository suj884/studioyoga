<!-- fragments/navbar.html -->
<div th:fragment="navbar">
	<nav class="navbar navbar-expand-lg fixed-top bg-body-tertiary shadow-sm">
		<div class="container-fluid d-flex justify-content-center">
			<a th:href="@{/}" class="navbar-brand fs-4 fw-bold text-primary" style="text-decoration:none;">
				<span class="material-icons align-middle" style="font-size:1.5em;vertical-align:middle;">spa</span>
				Studio Yoga
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
				aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<div class="w-100 text-center text-primary">
					<ul class="navbar-nav mx-auto mb-2 mb-lg-0 justify-content-center">
						<li class="nav-item"><a class="nav-link" th:href="@{/}">Inicio</a></li>
						<li class="nav-item"><a class="nav-link" th:href="@{/classes}">Clases</a></li>
						<li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="dropdownClases"
								type="button" data-bs-toggle="dropdown" aria-expanded="false">Sobre las clases</a>
							<ul class="dropdown-menu" aria-labelledby="dropdownClases">
								<li><a class="dropdown-item" th:href="@{/schedule}">Horarios</a></li>
								<li><a class="dropdown-item" th:href="@{/prices}">Precios
										y planes</a></li>
								<li><a class="dropdown-item" th:href="@{/rules}">Normas
										y Recomendaciones</a></li>
							</ul>
						</li>
						<li class="nav-item"><a class="nav-link" th:href="@{/events}">Eventos</a></li>
						<li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="dropdownMas"
								type="button" data-bs-toggle="dropdown" aria-expanded="false">Más</a>
							<ul class="dropdown-menu" aria-labelledby="dropdownMas">
								<li><a class="dropdown-item" th:href="@{/blog}">Blog</a></li>
								<li><a class="dropdown-item" th:href="@{/guide}">Guía
										del Yoga</a></li>
								<li><a class="dropdown-item" th:href="@{/faq}">Preguntas
										frecuentes</a></li>
							</ul>
						</li>
						<li class="nav-item"><a class="nav-link" th:href="@{/location}">Ubicación</a></li>
					</ul>
				</div>
				<div class="ms-auto d-flex align-items-center" sec:authorize="isAuthenticated()">
					<img th:src="${#authentication.principal.profilePicture != null ? #authentication.principal.profilePicture : '/images/default-avatar.png'}"
						alt="Foto de perfil" class="rounded-circle me-2" width="40" height="40"
						style="object-fit: cover;">
					<span class="me-2 fw-semibold"
						th:text="${#strings.substringBefore(#authentication.principal.username, '@')}">
						Usuario
					</span>
					<a th:href="@{/classes/myReservations}" class="btn btn-outline-primary btn-sm mx-2">
						<i class="bi bi-calendar-check"></i> Mis reservas
					</a>
					<form th:action="@{/logout}" method="post" class="d-inline">
						<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
						<button class="btn btn-outline-secondary rounded-5 mx-1 px-4" type="submit">Cerrar
							sesión</button>
					</form>
				</div>
				<div class="ms-auto" sec:authorize="!isAuthenticated()">
					<a th:href="@{/login}" class="btn btn-secondary rounded-5 mx-2 px-2">Login</a>
				</div>
			</div>
		</div>
	</nav>
</div>