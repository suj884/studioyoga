<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Clases</title>
	<link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.6/dist/minty/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/custom.css}">
	<link rel="stylesheet" th:href="@{/css/classes.css}">
</head>

<body>
	<!-- Incluye el navbar-fragment -->
	<header>
		<div th:replace="~{fragments/navbar :: navbar}"></div>
	</header>
	<div class="container mt-5 py-4">
		<h1 class="text-center mb-5">Clases</h1>
		<div th:replace="~{fragments/messages :: messages}"></div>

		<div th:each="entry : ${clasesPorFecha.entrySet()}">
			<div class="card mb-4 shadow">
				<div class="card-header bg-white pb-1 pt-3">
					 <h5 class="mb-0"
                th:text="${#temporals.format(entry.key, 'EEEE, dd MMMM yyyy', T(java.util.Locale).forLanguageTag('es'))}">
                Fecha
            </h5>
				</div>
				<div class="card-body pt-2 pb-2">
					<div th:if="${#lists.isEmpty(entry.value)}">
						<p class="text-muted">No hay clases para esta fecha.</p>
					</div>
					<div th:each="claseDTO : ${entry.value}">
						<div class="clase-row">
							<!-- Hora -->
							<div class="clase-hora" th:text="${#strings.substring(claseDTO.classes.timeInit,0,5)}">
							</div>
							<!-- Info -->
							<div class="clase-info">
								<span th:text="${claseDTO.classes.title}"></span>
								<span class="clase-plazas"	th:text="'(' + ${claseDTO.spotsLeft} + '/' + ${claseDTO.classes.capacity} + ')'"></span>
							</div>
							<div>
								<span class="clase-instructor" th:text="${claseDTO.classes.instructor}"></span>
							</div>
							<!-- Reservar -->
							<div class="clase-reservar">
								<a th:if="${claseDTO.spotsLeft > 0}"
									th:href="@{/classes/reserve/{id}(id=${claseDTO.classes.id})}"
									class="link-primary text-decoration-none">
									Reservar
								</a>
								<span th:if="${claseDTO.spotsLeft == 0}" class="text-danger">Completa</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


	</div>


	<!-- Incluye el footer-fragment -->
	<div th:replace="~{fragments/footer :: footer}"></div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
		crossorigin="anonymous"></script>
</body>

</html>

</html>